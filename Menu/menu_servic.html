<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Administrador Servicios</title>
<link rel="stylesheet" href="menu.css">
<link rel="icon" href="/img/logo.png">
<!-- Fuente moderna -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<!-- Iconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="dashboard-container">
    
    <!-- Sidebar -->
    <aside class="sidebar">
    <div class="logo">
    <img src="/img/logo.png" alt="Logo">
        <h2>D&A Systems group</h2>
    </div>
    <ul class="menu">
        <li><a href="menu_admin.html"><i class="fa fa-user"></i> Mi perfil</a></li>
        <li><i class="fa fa-cog"></i> Configuración</li>
        <li><a href="/Menu/menu_servic.html"><i class="fa fa-briefcase"></i> Servicios</a></li>
        <li><a href="/Menu/menu_user.html"><i class="fa fa-users"></i> Gestión de usuarios</a></li>
        <li><i class="fa fa-headset"></i> Soporte tickets</li>
        <li><a href="/Login/login.html">
        <i class="fa fa-sign-out-alt"></i> Cerrar Sesión</a>
        </li>
    </ul>
    </aside>

    <!-- Main -->
    <main class="main-content">
    <!-- Navbar -->
    <nav class="navbar">
        <h1> <span>Servicios</span></h1>
        <div class="user-info">
        <span>Hola, Administrador</span>
        <img src="/img/user.png" alt="user" class="user-avatar">
        </div>
    </nav>



    <!-- Tabla -->
    <section class="table-section">
        <h2>Listado de Servicios</h2>
        <table>
        <thead>
            <tr>
            <th>Servicio</th>
            <th>Cantidad</th>
            <th>Promoción</th>
            <th>Referencia</th>
            <th>Modificar</th>
            </tr>
        </thead>
        <tbody>
            <tr>
            <td>Seguridad informática</td>
            <td>stock 8</td>
            <td>82</td>
            <td>90.1</td>
            <td><button class="edit-btn"><i class="fa fa-pen"></i></button></td>
            </tr>
            <tr>
            <td>Data analytics</td>
            <td>stock 20</td>
            <td>52</td>
            <td>33.2</td>
            <td><button class="edit-btn"><i class="fa fa-pen"></i></button></td>
            </tr>
            <tr>
            <td>Automatización</td>
            <td>stock 12</td>
            <td>60</td>
            <td>99.4</td>
            <td><button class="edit-btn"><i class="fa fa-pen"></i></button></td>
            </tr>
            <tr>
            <td>Soporte 24/7</td>
            <td>stock 10</td>
            <td>45</td>
            <td>21.9</td>
            <td><button class="edit-btn"><i class="fa fa-pen"></i></button></td>
            </tr>
        </tbody>
        </table>
    </section>

    <!-- Paginación -->
    <div class="pagination">
        <a href="#">«</a>
        <a href="#" class="active">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <span>…</span>
        <a href="#">67</a>
        <a href="#">68</a>
        <a href="#">»</a>
    </div>
    </main>
</div>
<script>
  const filasPorPagina = 5; // Cantidad de servicios por página
let paginaActual = 1;
let servicios = [];

  // Cargar los datos del JSON
fetch("/Servicios/servicios.json")
    .then(response => response.json())
    .then(data => {
    servicios = data;
    mostrarPagina(paginaActual);
    generarPaginacion();
    })
    .catch(error => {
    console.error("Error al cargar los servicios:", error);
    });

  // Función para mostrar una página específica
function mostrarPagina(numPagina) {
    const tbody = document.querySelector("tbody");
    tbody.innerHTML = "";

    const inicio = (numPagina - 1) * filasPorPagina;
    const fin = inicio + filasPorPagina;
    const serviciosPagina = servicios.slice(inicio, fin);

    serviciosPagina.forEach(servicio => {
    const fila = document.createElement("tr");
    fila.innerHTML = `
        <td>${servicio.nombre}</td>
        <td>Stock ${Math.floor(Math.random() * 20) + 1}</td>
        <td>${(Math.random() * 100).toFixed(0)}</td>
        <td>${(Math.random() * 100).toFixed(1)}</td>
        <td><button class="edit-btn"><i class="fa fa-pen"></i></button></td>
    `;
    tbody.appendChild(fila);
    });
}

  // Función para generar los botones de paginación
function generarPaginacion() {
    const totalPaginas = Math.ceil(servicios.length / filasPorPagina);
    const paginacion = document.querySelector(".pagination");
    paginacion.innerHTML = "";

    // Botón anterior
    const prev = document.createElement("a");
    prev.href = "#";
    prev.textContent = "«";
    prev.addEventListener("click", () => {
    if (paginaActual > 1) {
        paginaActual--;
        mostrarPagina(paginaActual);
        generarPaginacion();
    }
    });
    paginacion.appendChild(prev);

    // Botones de número
    for (let i = 1; i <= totalPaginas; i++) {
    const btn = document.createElement("a");
    btn.href = "#";
    btn.textContent = i;
    if (i === paginaActual) btn.classList.add("active");
    btn.addEventListener("click", () => {
        paginaActual = i;
        mostrarPagina(paginaActual);
        generarPaginacion();
    });
    paginacion.appendChild(btn);
    }

    // Botón siguiente
    const next = document.createElement("a");
    next.href = "#";
    next.textContent = "»";
    next.addEventListener("click", () => {
    if (paginaActual < totalPaginas) {
        paginaActual++;
        mostrarPagina(paginaActual);
        generarPaginacion();
    }
    });
    paginacion.appendChild(next);
}
</script>

</body>
</html>
